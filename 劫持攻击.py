from scapy.all import *
import time

# Guided模式
data1 = b'\xfe\x21\x16\xff\xbe\x4c\x00\x00\x80\x3f\x00\x00\x80\x40\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xb0\x00\x01\x01\x00\xc4\x84'

data2 = b'\xfe\x06\xc8\xff\xbe\x0b\x04\x00\x00\x00\x01\x01\x1b\x08'

data3 = b'\xfe\x06\xc9\xff\xbe\x0b\x04\x00\x00\x00\x01\x01\x8a\x5d'

# 解锁
data4 = b'\xfe\x21\x6a\xff\xbe\x4c\x00\x00\x80\x3f\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x90\x01\x01\x01\x00\x73\x31'

# 起飞
data5 = b'\xfe\x21\x16\xff\xbe\x4c\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x48\x42\x16\x00\x01\x01\x00\x1a\xda'

# 降落

data6 = b'\xfe\x21\x7f\xff\xbe\x4c\x00\x00\x80\x3f\x00\x00\x10\x41\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xb0\x00\x01\x01\x00\x87\xb2'

data7 = b'\xfe\x06\x80\xff\xbe\x0b\x09\x00\x00\x00\x01\x01\xfb\x57'

data8 = b'\xfe\x06\x81\xff\xbe\x0b\x09\x00\x00\x00\x01\x01\x6a\x02'

while True:
    # Guided模式
    send(IP(src='192.168.43.148', dst='192.168.43.123') / UDP(sport=14550, dport=14555) / data1)
    send(IP(src='192.168.43.148', dst='192.168.43.123') / UDP(sport=14550, dport=14555) / data2)
    # send(IP(src='192.168.43.148', dst='192.168.43.123') / UDP(sport=14550, dport=14555) / data3)
    # time.sleep(1)
    # # 解锁
    # send(IP(src='192.168.43.148', dst='192.168.43.123') / UDP(sport=14550, dport=14555) / data4)
    # time.sleep(1)
    # # 起飞
    # send(IP(src='192.168.43.148', dst='192.168.43.123') / UDP(sport=14550, dport=14555) / data5)
    # time.sleep(1)
    # # 降落
    # send(IP(src='192.168.43.148', dst='192.168.43.123') / UDP(sport=14550, dport=14555) / data6)
    # send(IP(src='192.168.43.148', dst='192.168.43.123') / UDP(sport=14550, dport=14555) / data7)
    # send(IP(src='192.168.43.148', dst='192.168.43.123') / UDP(sport=14550, dport=14555) / data8)

    break